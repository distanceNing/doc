#### 模块划分以及模块复用

<img src="C:\Users\ninggyang\AppData\Roaming\Typora\typora-user-images\image-20200526094405629.png" alt="image-20200526094405629" style="zoom:80%;" />



#####  概念：

* 模块：内部由数据和业务逻辑组成。

  * 扩展性要求： 定位明确，（单一职责）
  * 自成体系，粒度适中。
  *  概念完整 ：数据上，模块需要覆盖对应业务领域的全部数据，功能上要包含业务领域的全部功能
    * 比如：订单模块，它要覆盖所有渠道的订单，包括三方平台的订单、自有商城的订单、线下门店的订单等，这些不同类型订单的数据模型和实际数据，都由订单模块负责。
    * 比如订单模块包含所有订单相关的功能，包括订单数据的增删改查、订单业务规则校验、订单的状态和生命周期管理等。

* 关系：模块之间的依赖关系，调用关系。

  * 简化依赖的方向和减少依赖的数量。
  * 尽量把网状结构转化为层次结构，模块结构层次化是简化模块依赖关系的有力手段。
    * 层与层之间自上而下的依赖

  <img src="C:\Users\ninggyang\AppData\Roaming\Typora\typora-user-images\image-20200526095239534.png" alt="image-20200526095239534" style="zoom:80%;" />

#### 打造可扩展的模块体系

##### 	模块拆分：

 * 水平拆分

    * 水平拆分是指从上到下把系统分为多层，按照系统处理的先后顺序，把业务拆分为几个步骤。

      比如，整个叫车过程，我们可以分为 UI 展现、地图搜索、运力调度和订单支付等几个环节，这是根据系统的处理过程进行划分的。

 * 垂直拆分

    * 垂直拆分指的是按照不同的业务线拆分，比如，将整个出行业务分为出租车业务、快车业务和顺风车业务，按照不同的业务场景，自上而下进行竖切，让每个业务都自成体系，形成自己的业务闭环。

      

* 经验

    *  一般做业务架构时，我们先考虑垂直拆分，从大方向上，把不同业务给区分清楚，然后再针对具体业务，按照业务处理流程进行水平拆分。
    * 如果同时进行垂直拆分和水平拆分，一个大系统被拆分为了一个二维的模块矩阵，每个模块既属于某个业务线，也属于业务流程的某个环节。这样一来，每个模块的职责都很清晰，当业务变化了，我们可以清楚地知道，这个变化涉及哪些模块，然后，对这些模块进行相应的调整就可以。

#####   模块整合：

​	系统拆完后，接下来就是模块整合的工作，整合也有两种好的手段：通用化和平台化。

 * 通用化

   	* 通用化指的是通过抽象设计，让一个模块具备通用的能力，能够替代多个类似功能的模块。

 * 平台化

   * 平台化是把定位相同的模块组织在一起，以组团的方式对外提供服务。对于外部系统来说，我们可以把这些模块看成是一个整体，一起对业务场景提供全面的支撑。

     * 地图搜索、运力调度、订单支付，都是各个业务线都需要的基础和通用的业务能力，当我们增加新的业务线时，还是离不开这些基础能力。

       <img src="C:\Users\ninggyang\AppData\Roaming\Typora\typora-user-images\image-20200526100159455.png" alt="image-20200526100159455" style="zoom:80%;" />

* 经验：
  
  * 业务平台化是模块依赖关系层次化的一个特例，只是它偏向于基础能力，在实践中，当业务线很多，业务规则很复杂时，我们经常把底层业务能力抽取出来，进行平台化处理。